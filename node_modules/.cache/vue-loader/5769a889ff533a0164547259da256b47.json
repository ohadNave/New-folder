{"remainingRequest":"C:\\Users\\ohadv\\Downloads\\New folder\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ohadv\\Downloads\\New folder\\src\\pages\\MyMealPage.vue?vue&type=style&index=0&id=e349e53c&lang=scss&scoped=true&","dependencies":[{"path":"C:\\Users\\ohadv\\Downloads\\New folder\\src\\pages\\MyMealPage.vue","mtime":1594807805736},{"path":"C:\\Users\\ohadv\\Downloads\\New folder\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ohadv\\Downloads\\New folder\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\ohadv\\Downloads\\New folder\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\ohadv\\Downloads\\New folder\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ohadv\\Downloads\\New folder\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ohadv\\Downloads\\New folder\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCiNjb250YWluZXIgew0KICB3aWR0aDogNTAlOw0KICBtYXJnaW46IDUwcHg7DQp9DQoNCi5yZWNpcGUtaW1hZ2Ugew0KICB3aWR0aDogNDAwcHg7DQogIGhlaWdodDogMzUwcHg7DQogIGZsb2F0OkxlZnQ7DQp9DQoNCi5jYXJkLWltZy10b3Agew0KICB3aWR0aDogNjB2dzsNCiAgaGVpZ2h0OiAxNXZ3OyANCiAgb2JqZWN0LWZpdDogY292ZXI7IH0NCg0KICAuTU1idG57DQogIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgIHJpZ2h0OiA0MDBweDsNCiAgICANCiAgfQ0KDQogIA0KDQo="},{"version":3,"sources":["MyMealPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4JA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA","file":"MyMealPage.vue","sourceRoot":"src/pages","sourcesContent":["<template>\r\n  <div id=\"container\">\r\n    <h1 style=\"position: relative; right: -400px;\">My Meal</h1>\r\n    <div style=\"position: relative; right: -810px;\">\r\n    <b-button  v-if=\"!sortClicked\" @click=\"sortBtn()\">Sort</b-button>\r\n    <b-button   v-if=\"sortClicked\" @click=\"endsortBtn()\">Ok</b-button>\r\n    <b-button class=\"ml-2 w-2\" variant=\"danger\" v-if=\"!sortClicked\" @click=\"delAllBtn()\">Delete All</b-button>\r\n    </div>\r\n    <br>\r\n    <br>\r\n    <ol>\r\n    <b-card-group>\r\n    <div v-for=\"recipe in this.recipes\" :key=\"recipe.rank\">\r\n        <li style=\"font-size:1.5rem\">\r\n          <br>\r\n        <b-card :img-src=\"recipe.image\" img-alt=\"Card image\" img-top>\r\n      <b-card-title>{{recipe.title}}</b-card-title>\r\n      <b-progress v-if=\"recipe.start && recipe.value>0\">\r\n      <b-progress-bar :value=\"recipe.value\" :max=\"recipe.max\" show-progress animated>{{recipe.value}}/{{recipe.max}}</b-progress-bar>\r\n      </b-progress>\r\n      <br v-if=\"recipe.start && recipe.value>0\">\r\n      <div v-if=\"!sortClicked\">\r\n        <router-link :to=\"{ name: 'MakePage', params: {recipe_Id: recipe.recipe_id, type:recipe.type} }\" >\r\n          <b-button variant=\"success\" v-if=\"recipe.start  && recipe.value>0\">Continue</b-button>\r\n          <b-button v-else variant=\"success\">Start Cooking</b-button>\r\n        </router-link>\r\n        <b-button class=\"ml-2 w-2\" variant=\"danger\" @click=\"deleteRecipe(recipe)\">Delete</b-button>\r\n      </div>   \r\n      <div v-else>\r\n        <b-button variant=\"success\" v-if=\"recipe.rank>=counter\"  @click=\"pickmeBtn(recipe)\">Pick me to be {{counter}}</b-button>\r\n        <b-button variant=\"danger\" v-else @click=\"CancelBtn(recipe)\">Cancel</b-button>\r\n      </div>     \r\n      </b-card>\r\n        </li>\r\n        <br>\r\n    </div>\r\n    </b-card-group>\r\n    </ol>\r\n    <br>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {eventBus} from \"../main.js\";\r\nexport default {\r\n  name:\"MyMeal\",\r\n  data() {\r\n    return {\r\n      recipes: [],\r\n      sortClicked:false,\r\n      counter:1\r\n    };\r\n  },\r\n  async mounted() {\r\n    this.getData();\r\n  },\r\n  methods:{\r\n      async getData(){\r\n            let response = await this.axios.get(\r\n      `https://backend3-2.herokuapp.com/user/makeRecipeGetAll`\r\n    );\r\n            console.log(response);\r\n        this.recipes=[];\r\n        this.recipes.push(...response.data);\r\n        this.sortedRecipes();\r\n        this.getInstrcData();\r\n\r\n      },\r\n    getInstrcData(){\r\n     for(let i=0;i<this.recipes.length;i++){\r\n        let path=\"/MakePage/\"+this.recipes[i].recipe_id.replace(\" \",\"%20\")+\"/\"+this.recipes[i].type;\r\n         if(this.$root.store.MakeHistory.has(path)){\r\n             let data=this.$root.store.MakeHistory.get(path);\r\n            this.recipes[i].start=true;\r\n             this.recipes[i].max=data.length;\r\n           this.recipes[i].value=this.getValue(data);\r\n         }else{\r\n            this.recipes[i].start=false;\r\n      }\r\n    }\r\n  },\r\n    getValue(arr){\r\n    let count=0;\r\n    for(let i=0;i<arr.length;i++){\r\n      if(arr[i]==true){\r\n        count++;\r\n      }\r\n    }\r\n    return count;\r\n  },\r\n  sortBtn(){\r\n    this.counter=1;\r\n    this.sortedRecipes();\r\n    this.sortClicked=true;\r\n  },\r\n  sortedRecipes(){\r\n    this.recipes.sort((a,b) => (a.rank > b.rank) ? 1 : -1);\r\n  },\r\n  async endsortBtn(){\r\n    await this.axios.post(\r\n      `https://backend3-2.herokuapp.com/user/makeRecipeUpdate`,{\r\n        recipes: this.recipes\r\n      });\r\n        this.sortClicked=false;\r\n  },\r\n  pickmeBtn(recipe){\r\n    let tmprecipe=this.recipes[this.counter-1];\r\n    this.recipes[this.counter-1]=recipe;\r\n    this.recipes[recipe.rank-1]=tmprecipe;\r\n    tmprecipe.rank=recipe.rank;\r\n    recipe.rank=this.counter;\r\n    this.counter++;\r\n    this.sortedRecipes();\r\n  },\r\n  CancelBtn(recipe){\r\n    let i=recipe.rank;\r\n    for(i;i<this.counter-1;i++){\r\n      this.recipes[i].rank--;\r\n    }\r\n    recipe.rank=this.counter-1;\r\n    this.counter--;\r\n    this.sortedRecipes();\r\n  },\r\n  async deleteRecipe(recipe){\r\n    let path=\"/MakePage/\"+recipe.recipe_id.replace(\" \",\"%20\")+\"/\"+recipe.type;\r\n    let newRecipes=[];\r\n    let count=1;\r\n    for(let i=0;i<this.recipes.length;i++){\r\n      if(this.recipes[i]!==recipe){\r\n        newRecipes.push(this.recipes[i]);\r\n        this.recipes[i]=count;\r\n        count++;\r\n      }\r\n    }\r\n    this.recipes=[];\r\n    this.recipes.push(...newRecipes);\r\n    this.$root.store.MakeHistory.delete(path);\r\n    localStorage.myMap = JSON.stringify(Array.from(this.$root.store.MakeHistory.entries()));\r\n    await this.axios.get(\r\n      `https://backend3-2.herokuapp.com/user/makeRecipeDelete/recipe_id/${recipe.recipe_id}`);\r\n    this.sortedRecipes();\r\n    eventBus.$emit('fireMethod');\r\n  },\r\n  async delAllBtn(){\r\n     await this.axios.get(\r\n      `https://backend3-2.herokuapp.com/user/makeRecipeDeleteAll`);\r\n      this.recipes=[];\r\n      this.$root.store.MakeHistory.clear();\r\n      localStorage.myMap = JSON.stringify(Array.from(this.$root.store.MakeHistory.entries()));\r\n       eventBus.$emit('fireMethod');\r\n  }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n#container {\r\n  width: 50%;\r\n  margin: 50px;\r\n}\r\n\r\n.recipe-image {\r\n  width: 400px;\r\n  height: 350px;\r\n  float:Left;\r\n}\r\n\r\n.card-img-top {\r\n  width: 60vw;\r\n  height: 15vw; \r\n  object-fit: cover; }\r\n\r\n  .MMbtn{\r\n  position: relative;\r\n   right: 400px;\r\n    \r\n  }\r\n\r\n  \r\n\r\n</style>"]}]}