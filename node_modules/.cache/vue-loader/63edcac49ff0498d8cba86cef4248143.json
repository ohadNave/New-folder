{"remainingRequest":"C:\\Users\\ohadv\\Downloads\\New folder\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ohadv\\Downloads\\New folder\\src\\pages\\MyMealPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\ohadv\\Downloads\\New folder\\src\\pages\\MyMealPage.vue","mtime":1594807805736},{"path":"C:\\Users\\ohadv\\Downloads\\New folder\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ohadv\\Downloads\\New folder\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ohadv\\Downloads\\New folder\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\ohadv\\Downloads\\New folder\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ohadv\\Downloads\\New folder\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQge2V2ZW50QnVzfSBmcm9tICIuLi9tYWluLmpzIjsNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZToiTXlNZWFsIiwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgcmVjaXBlczogW10sDQogICAgICBzb3J0Q2xpY2tlZDpmYWxzZSwNCiAgICAgIGNvdW50ZXI6MQ0KICAgIH07DQogIH0sDQogIGFzeW5jIG1vdW50ZWQoKSB7DQogICAgdGhpcy5nZXREYXRhKCk7DQogIH0sDQogIG1ldGhvZHM6ew0KICAgICAgYXN5bmMgZ2V0RGF0YSgpew0KICAgICAgICAgICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5heGlvcy5nZXQoDQogICAgICBgaHR0cHM6Ly9iYWNrZW5kMy0yLmhlcm9rdWFwcC5jb20vdXNlci9tYWtlUmVjaXBlR2V0QWxsYA0KICAgICk7DQogICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7DQogICAgICAgIHRoaXMucmVjaXBlcz1bXTsNCiAgICAgICAgdGhpcy5yZWNpcGVzLnB1c2goLi4ucmVzcG9uc2UuZGF0YSk7DQogICAgICAgIHRoaXMuc29ydGVkUmVjaXBlcygpOw0KICAgICAgICB0aGlzLmdldEluc3RyY0RhdGEoKTsNCg0KICAgICAgfSwNCiAgICBnZXRJbnN0cmNEYXRhKCl7DQogICAgIGZvcihsZXQgaT0wO2k8dGhpcy5yZWNpcGVzLmxlbmd0aDtpKyspew0KICAgICAgICBsZXQgcGF0aD0iL01ha2VQYWdlLyIrdGhpcy5yZWNpcGVzW2ldLnJlY2lwZV9pZC5yZXBsYWNlKCIgIiwiJTIwIikrIi8iK3RoaXMucmVjaXBlc1tpXS50eXBlOw0KICAgICAgICAgaWYodGhpcy4kcm9vdC5zdG9yZS5NYWtlSGlzdG9yeS5oYXMocGF0aCkpew0KICAgICAgICAgICAgIGxldCBkYXRhPXRoaXMuJHJvb3Quc3RvcmUuTWFrZUhpc3RvcnkuZ2V0KHBhdGgpOw0KICAgICAgICAgICAgdGhpcy5yZWNpcGVzW2ldLnN0YXJ0PXRydWU7DQogICAgICAgICAgICAgdGhpcy5yZWNpcGVzW2ldLm1heD1kYXRhLmxlbmd0aDsNCiAgICAgICAgICAgdGhpcy5yZWNpcGVzW2ldLnZhbHVlPXRoaXMuZ2V0VmFsdWUoZGF0YSk7DQogICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgIHRoaXMucmVjaXBlc1tpXS5zdGFydD1mYWxzZTsNCiAgICAgIH0NCiAgICB9DQogIH0sDQogICAgZ2V0VmFsdWUoYXJyKXsNCiAgICBsZXQgY291bnQ9MDsNCiAgICBmb3IobGV0IGk9MDtpPGFyci5sZW5ndGg7aSsrKXsNCiAgICAgIGlmKGFycltpXT09dHJ1ZSl7DQogICAgICAgIGNvdW50Kys7DQogICAgICB9DQogICAgfQ0KICAgIHJldHVybiBjb3VudDsNCiAgfSwNCiAgc29ydEJ0bigpew0KICAgIHRoaXMuY291bnRlcj0xOw0KICAgIHRoaXMuc29ydGVkUmVjaXBlcygpOw0KICAgIHRoaXMuc29ydENsaWNrZWQ9dHJ1ZTsNCiAgfSwNCiAgc29ydGVkUmVjaXBlcygpew0KICAgIHRoaXMucmVjaXBlcy5zb3J0KChhLGIpID0+IChhLnJhbmsgPiBiLnJhbmspID8gMSA6IC0xKTsNCiAgfSwNCiAgYXN5bmMgZW5kc29ydEJ0bigpew0KICAgIGF3YWl0IHRoaXMuYXhpb3MucG9zdCgNCiAgICAgIGBodHRwczovL2JhY2tlbmQzLTIuaGVyb2t1YXBwLmNvbS91c2VyL21ha2VSZWNpcGVVcGRhdGVgLHsNCiAgICAgICAgcmVjaXBlczogdGhpcy5yZWNpcGVzDQogICAgICB9KTsNCiAgICAgICAgdGhpcy5zb3J0Q2xpY2tlZD1mYWxzZTsNCiAgfSwNCiAgcGlja21lQnRuKHJlY2lwZSl7DQogICAgbGV0IHRtcHJlY2lwZT10aGlzLnJlY2lwZXNbdGhpcy5jb3VudGVyLTFdOw0KICAgIHRoaXMucmVjaXBlc1t0aGlzLmNvdW50ZXItMV09cmVjaXBlOw0KICAgIHRoaXMucmVjaXBlc1tyZWNpcGUucmFuay0xXT10bXByZWNpcGU7DQogICAgdG1wcmVjaXBlLnJhbms9cmVjaXBlLnJhbms7DQogICAgcmVjaXBlLnJhbms9dGhpcy5jb3VudGVyOw0KICAgIHRoaXMuY291bnRlcisrOw0KICAgIHRoaXMuc29ydGVkUmVjaXBlcygpOw0KICB9LA0KICBDYW5jZWxCdG4ocmVjaXBlKXsNCiAgICBsZXQgaT1yZWNpcGUucmFuazsNCiAgICBmb3IoaTtpPHRoaXMuY291bnRlci0xO2krKyl7DQogICAgICB0aGlzLnJlY2lwZXNbaV0ucmFuay0tOw0KICAgIH0NCiAgICByZWNpcGUucmFuaz10aGlzLmNvdW50ZXItMTsNCiAgICB0aGlzLmNvdW50ZXItLTsNCiAgICB0aGlzLnNvcnRlZFJlY2lwZXMoKTsNCiAgfSwNCiAgYXN5bmMgZGVsZXRlUmVjaXBlKHJlY2lwZSl7DQogICAgbGV0IHBhdGg9Ii9NYWtlUGFnZS8iK3JlY2lwZS5yZWNpcGVfaWQucmVwbGFjZSgiICIsIiUyMCIpKyIvIityZWNpcGUudHlwZTsNCiAgICBsZXQgbmV3UmVjaXBlcz1bXTsNCiAgICBsZXQgY291bnQ9MTsNCiAgICBmb3IobGV0IGk9MDtpPHRoaXMucmVjaXBlcy5sZW5ndGg7aSsrKXsNCiAgICAgIGlmKHRoaXMucmVjaXBlc1tpXSE9PXJlY2lwZSl7DQogICAgICAgIG5ld1JlY2lwZXMucHVzaCh0aGlzLnJlY2lwZXNbaV0pOw0KICAgICAgICB0aGlzLnJlY2lwZXNbaV09Y291bnQ7DQogICAgICAgIGNvdW50Kys7DQogICAgICB9DQogICAgfQ0KICAgIHRoaXMucmVjaXBlcz1bXTsNCiAgICB0aGlzLnJlY2lwZXMucHVzaCguLi5uZXdSZWNpcGVzKTsNCiAgICB0aGlzLiRyb290LnN0b3JlLk1ha2VIaXN0b3J5LmRlbGV0ZShwYXRoKTsNCiAgICBsb2NhbFN0b3JhZ2UubXlNYXAgPSBKU09OLnN0cmluZ2lmeShBcnJheS5mcm9tKHRoaXMuJHJvb3Quc3RvcmUuTWFrZUhpc3RvcnkuZW50cmllcygpKSk7DQogICAgYXdhaXQgdGhpcy5heGlvcy5nZXQoDQogICAgICBgaHR0cHM6Ly9iYWNrZW5kMy0yLmhlcm9rdWFwcC5jb20vdXNlci9tYWtlUmVjaXBlRGVsZXRlL3JlY2lwZV9pZC8ke3JlY2lwZS5yZWNpcGVfaWR9YCk7DQogICAgdGhpcy5zb3J0ZWRSZWNpcGVzKCk7DQogICAgZXZlbnRCdXMuJGVtaXQoJ2ZpcmVNZXRob2QnKTsNCiAgfSwNCiAgYXN5bmMgZGVsQWxsQnRuKCl7DQogICAgIGF3YWl0IHRoaXMuYXhpb3MuZ2V0KA0KICAgICAgYGh0dHBzOi8vYmFja2VuZDMtMi5oZXJva3VhcHAuY29tL3VzZXIvbWFrZVJlY2lwZURlbGV0ZUFsbGApOw0KICAgICAgdGhpcy5yZWNpcGVzPVtdOw0KICAgICAgdGhpcy4kcm9vdC5zdG9yZS5NYWtlSGlzdG9yeS5jbGVhcigpOw0KICAgICAgbG9jYWxTdG9yYWdlLm15TWFwID0gSlNPTi5zdHJpbmdpZnkoQXJyYXkuZnJvbSh0aGlzLiRyb290LnN0b3JlLk1ha2VIaXN0b3J5LmVudHJpZXMoKSkpOw0KICAgICAgIGV2ZW50QnVzLiRlbWl0KCdmaXJlTWV0aG9kJyk7DQogIH0NCiAgfQ0KfTsNCg=="},{"version":3,"sources":["MyMealPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MyMealPage.vue","sourceRoot":"src/pages","sourcesContent":["<template>\r\n  <div id=\"container\">\r\n    <h1 style=\"position: relative; right: -400px;\">My Meal</h1>\r\n    <div style=\"position: relative; right: -810px;\">\r\n    <b-button  v-if=\"!sortClicked\" @click=\"sortBtn()\">Sort</b-button>\r\n    <b-button   v-if=\"sortClicked\" @click=\"endsortBtn()\">Ok</b-button>\r\n    <b-button class=\"ml-2 w-2\" variant=\"danger\" v-if=\"!sortClicked\" @click=\"delAllBtn()\">Delete All</b-button>\r\n    </div>\r\n    <br>\r\n    <br>\r\n    <ol>\r\n    <b-card-group>\r\n    <div v-for=\"recipe in this.recipes\" :key=\"recipe.rank\">\r\n        <li style=\"font-size:1.5rem\">\r\n          <br>\r\n        <b-card :img-src=\"recipe.image\" img-alt=\"Card image\" img-top>\r\n      <b-card-title>{{recipe.title}}</b-card-title>\r\n      <b-progress v-if=\"recipe.start && recipe.value>0\">\r\n      <b-progress-bar :value=\"recipe.value\" :max=\"recipe.max\" show-progress animated>{{recipe.value}}/{{recipe.max}}</b-progress-bar>\r\n      </b-progress>\r\n      <br v-if=\"recipe.start && recipe.value>0\">\r\n      <div v-if=\"!sortClicked\">\r\n        <router-link :to=\"{ name: 'MakePage', params: {recipe_Id: recipe.recipe_id, type:recipe.type} }\" >\r\n          <b-button variant=\"success\" v-if=\"recipe.start  && recipe.value>0\">Continue</b-button>\r\n          <b-button v-else variant=\"success\">Start Cooking</b-button>\r\n        </router-link>\r\n        <b-button class=\"ml-2 w-2\" variant=\"danger\" @click=\"deleteRecipe(recipe)\">Delete</b-button>\r\n      </div>   \r\n      <div v-else>\r\n        <b-button variant=\"success\" v-if=\"recipe.rank>=counter\"  @click=\"pickmeBtn(recipe)\">Pick me to be {{counter}}</b-button>\r\n        <b-button variant=\"danger\" v-else @click=\"CancelBtn(recipe)\">Cancel</b-button>\r\n      </div>     \r\n      </b-card>\r\n        </li>\r\n        <br>\r\n    </div>\r\n    </b-card-group>\r\n    </ol>\r\n    <br>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {eventBus} from \"../main.js\";\r\nexport default {\r\n  name:\"MyMeal\",\r\n  data() {\r\n    return {\r\n      recipes: [],\r\n      sortClicked:false,\r\n      counter:1\r\n    };\r\n  },\r\n  async mounted() {\r\n    this.getData();\r\n  },\r\n  methods:{\r\n      async getData(){\r\n            let response = await this.axios.get(\r\n      `https://backend3-2.herokuapp.com/user/makeRecipeGetAll`\r\n    );\r\n            console.log(response);\r\n        this.recipes=[];\r\n        this.recipes.push(...response.data);\r\n        this.sortedRecipes();\r\n        this.getInstrcData();\r\n\r\n      },\r\n    getInstrcData(){\r\n     for(let i=0;i<this.recipes.length;i++){\r\n        let path=\"/MakePage/\"+this.recipes[i].recipe_id.replace(\" \",\"%20\")+\"/\"+this.recipes[i].type;\r\n         if(this.$root.store.MakeHistory.has(path)){\r\n             let data=this.$root.store.MakeHistory.get(path);\r\n            this.recipes[i].start=true;\r\n             this.recipes[i].max=data.length;\r\n           this.recipes[i].value=this.getValue(data);\r\n         }else{\r\n            this.recipes[i].start=false;\r\n      }\r\n    }\r\n  },\r\n    getValue(arr){\r\n    let count=0;\r\n    for(let i=0;i<arr.length;i++){\r\n      if(arr[i]==true){\r\n        count++;\r\n      }\r\n    }\r\n    return count;\r\n  },\r\n  sortBtn(){\r\n    this.counter=1;\r\n    this.sortedRecipes();\r\n    this.sortClicked=true;\r\n  },\r\n  sortedRecipes(){\r\n    this.recipes.sort((a,b) => (a.rank > b.rank) ? 1 : -1);\r\n  },\r\n  async endsortBtn(){\r\n    await this.axios.post(\r\n      `https://backend3-2.herokuapp.com/user/makeRecipeUpdate`,{\r\n        recipes: this.recipes\r\n      });\r\n        this.sortClicked=false;\r\n  },\r\n  pickmeBtn(recipe){\r\n    let tmprecipe=this.recipes[this.counter-1];\r\n    this.recipes[this.counter-1]=recipe;\r\n    this.recipes[recipe.rank-1]=tmprecipe;\r\n    tmprecipe.rank=recipe.rank;\r\n    recipe.rank=this.counter;\r\n    this.counter++;\r\n    this.sortedRecipes();\r\n  },\r\n  CancelBtn(recipe){\r\n    let i=recipe.rank;\r\n    for(i;i<this.counter-1;i++){\r\n      this.recipes[i].rank--;\r\n    }\r\n    recipe.rank=this.counter-1;\r\n    this.counter--;\r\n    this.sortedRecipes();\r\n  },\r\n  async deleteRecipe(recipe){\r\n    let path=\"/MakePage/\"+recipe.recipe_id.replace(\" \",\"%20\")+\"/\"+recipe.type;\r\n    let newRecipes=[];\r\n    let count=1;\r\n    for(let i=0;i<this.recipes.length;i++){\r\n      if(this.recipes[i]!==recipe){\r\n        newRecipes.push(this.recipes[i]);\r\n        this.recipes[i]=count;\r\n        count++;\r\n      }\r\n    }\r\n    this.recipes=[];\r\n    this.recipes.push(...newRecipes);\r\n    this.$root.store.MakeHistory.delete(path);\r\n    localStorage.myMap = JSON.stringify(Array.from(this.$root.store.MakeHistory.entries()));\r\n    await this.axios.get(\r\n      `https://backend3-2.herokuapp.com/user/makeRecipeDelete/recipe_id/${recipe.recipe_id}`);\r\n    this.sortedRecipes();\r\n    eventBus.$emit('fireMethod');\r\n  },\r\n  async delAllBtn(){\r\n     await this.axios.get(\r\n      `https://backend3-2.herokuapp.com/user/makeRecipeDeleteAll`);\r\n      this.recipes=[];\r\n      this.$root.store.MakeHistory.clear();\r\n      localStorage.myMap = JSON.stringify(Array.from(this.$root.store.MakeHistory.entries()));\r\n       eventBus.$emit('fireMethod');\r\n  }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n#container {\r\n  width: 50%;\r\n  margin: 50px;\r\n}\r\n\r\n.recipe-image {\r\n  width: 400px;\r\n  height: 350px;\r\n  float:Left;\r\n}\r\n\r\n.card-img-top {\r\n  width: 60vw;\r\n  height: 15vw; \r\n  object-fit: cover; }\r\n\r\n  .MMbtn{\r\n  position: relative;\r\n   right: 400px;\r\n    \r\n  }\r\n\r\n  \r\n\r\n</style>"]}]}