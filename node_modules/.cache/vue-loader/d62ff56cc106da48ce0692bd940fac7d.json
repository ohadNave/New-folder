{"remainingRequest":"C:\\Users\\ohadv\\Downloads\\New folder\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ohadv\\Downloads\\New folder\\src\\pages\\SearchPage.vue?vue&type=style&index=0&id=50c50b5d&lang=scss&scoped=true&","dependencies":[{"path":"C:\\Users\\ohadv\\Downloads\\New folder\\src\\pages\\SearchPage.vue","mtime":1594830477816},{"path":"C:\\Users\\ohadv\\Downloads\\New folder\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ohadv\\Downloads\\New folder\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\ohadv\\Downloads\\New folder\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\ohadv\\Downloads\\New folder\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ohadv\\Downloads\\New folder\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ohadv\\Downloads\\New folder\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5jb250YWluZXIgew0KICBtYXgtd2lkdGg6IDUwMHB4Ow0KfQ0KDQojbGFiew0KICBwb3NpdGlvbjphYnNvbHV0ZTsNCiAgcmlnaHQ6MzElOw0KfQ0KDQoucmVjaXBlUHJ2ew0KICBoZWlnaHQ6IDYwJTsNCiAgd2lkdGg6IG1pbi1jb250ZW50Ow0KfQ0KDQouU2J0bnsNCiAgIGJhY2tncm91bmQtY29sb3I6ICM5MkM2N0Q7IGJvcmRlci1jb2xvcjogd2hpdGUNCn0NCg0K"},{"version":3,"sources":["SearchPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsJA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"SearchPage.vue","sourceRoot":"src/pages","sourcesContent":["<template>\r\n<div class=\"container\">\r\n    <h1 class=\"title\">Serach</h1>\r\n     <b-form @submit.prevent=\"onSearch\"  @reset.prevent=\"onReset\">\r\n      <b-form-group id=\"input-group-query\" label-cols-sm=\"3\" label=\"Query:\" label-for=\"query\">\r\n        <b-form-input id=\"query\" type=\"text\" v-model=\"form.query\"></b-form-input>\r\n      </b-form-group>\r\n      <b-form-group id=\"input-group-resultnum\" label-cols-sm=\"3\" label=\"Num of results:\" label-for=\"resultnum\">\r\n        <b-form-select id=\"resultnum\" v-model=\"form.number\" :options=\"resultNum\"></b-form-select>\r\n      </b-form-group>\r\n         <b-form-group id=\"input-group-cuisine\" label-cols-sm=\"3\" label=\"Cuisine:\" label-for=\"cuisine\">\r\n        <b-form-select id=\"cuisine\" v-model=\"form.cuisine\" :options=\"cuisines\"></b-form-select>\r\n      </b-form-group>\r\n         <b-form-group id=\"input-group-diet\" label-cols-sm=\"3\" label=\"Diet:\" label-for=\"diet\">\r\n        <b-form-select id=\"diet\" v-model=\"form.diet\" :options=\"diets\"></b-form-select>\r\n      </b-form-group>\r\n        <b-form-group id=\"input-group-intolarence\" label-cols-sm=\"3\" label=\"Intolarence:\" label-for=\"intolarence\">\r\n        <b-form-select id=\"intolarence\" v-model=\"form.intolarence\" :options=\"intolarences\"></b-form-select>\r\n      </b-form-group>\r\n      <b-button type=\"reset\" variant=\"danger\">Reset</b-button>\r\n       <b-button type=\"submit\" variant=\"primary\" style=\"width:250px;\" class=\"ml-5 w-75 Sbtn\">Search</b-button>\r\n    </b-form>\r\n    <br>\r\n     <b-container v-if=\"results\">\r\n    <h3>\r\n      Search Results:\r\n    </h3>\r\n    <b-form-group id=\"input-group-sort\" label-cols-sm=\"8\" label-for=\"sort\">\r\n        <span>Sort By:</span>\r\n        <span><b-form-select id=\"sort\" v-model=\"sort\" :options=\"sortOption\" @change=\"sortResults()\"></b-form-select></span>\r\n      </b-form-group>\r\n      <RecipesList recipe_type=\"recipe\" :recipes=\"recipes\"/>\r\n  </b-container>\r\n  <b-container v-else>\r\n    <h3>No Search Results</h3>\r\n  </b-container>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport cuisines from \"../assets/cuisine\";\r\nimport diets from \"../assets/diet\";\r\nimport intolarences from \"../assets/intolerances\";\r\nimport RecipesList from \"../components/RecipesList\";\r\nimport cuisine from '../assets/cuisine';\r\n\r\nexport default {\r\n  name: \"Search\",\r\n  data() {\r\n    return {\r\n      form: {\r\n        query: \"\",\r\n        number: 5,\r\n        cuisine: null,\r\n        diet: null,\r\n        intolarence: null,\r\n      },\r\n      cuisines: [{ value: null, text: \"\", disabled: false }],\r\n      diets: [{ value: null, text: \"\", disabled: false }],\r\n      intolarences: [{ value: null, text: \"\", disabled: false }],\r\n      resultNum: [5,10,15],\r\n      recipes: [],\r\n      results: true,\r\n      sort: \"Sort by\",\r\n      sortOption: [\"likes\",\"time\"],\r\n    };\r\n  },\r\n  components:{\r\n    RecipesList,\r\n  },\r\n  mounted() {\r\n    this.cuisines.push(...cuisines);\r\n    this.diets.push(...diets);\r\n    this.intolarences.push(...intolarences);\r\n    if(this.$root.store.username){\r\n      let history=localStorage.getItem(this.$root.store.username);\r\n      if(history){\r\n      const recipes = JSON.parse(localStorage.getItem(this.$root.store.username));\r\n        this.recipes = [];\r\n        this.recipes.push(...recipes);\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    sortResults(){\r\n      if(this.sort === \"likes\"){\r\n        this.recipes.sort((a,b) => (a.aggregateLikes < b.aggregateLikes) ? 1 : -1)\r\n      }\r\n      if(this.sort === \"time\"){\r\n        this.recipes.sort((a,b) => (a.readyInMinutes > b.readyInMinutes) ? 1 : -1)\r\n      }\r\n      console.log(this.recipes);\r\n    },\r\n    async onSearch() {\r\n      this.sort=\"\";\r\n      let response;\r\n      try {\r\n        let searchParmas={};\r\n        if(this.form.cuisine !== null){\r\n          searchParmas[\"cuisine\"]=this.form.cuisine;\r\n        }\r\n        if(this.form.diet !== null){\r\n          searchParmas[\"diet\"]=this.form.diet;\r\n        }\r\n        if(this.form.intolarence !== null){\r\n          searchParmas[\"intolerances\"]=this.form.intolarence;\r\n        }\r\n        console.log(searchParmas);\r\n        if(this.$root.store.username){\r\n        response = await this.axios.get(\r\n          `https://backend3-2.herokuapp.com/user/search/query/${this.form.query}/amount/${this.form.number}`,{params: searchParmas});\r\n          localStorage.setItem(this.$root.store.username, JSON.stringify(response.data));\r\n        }else{\r\n          response = await this.axios.get(\r\n          `https://backend3-2.herokuapp.com/recipes/search/query/${this.form.query}/amount/${this.form.number}`,{params: searchParmas});\r\n        }\r\n        const recipes = response.data;\r\n        this.recipes = [];\r\n        this.recipes.push(...recipes);\r\n        if(recipes.length == 0){\r\n          this.results= false\r\n        }else{\r\n          this.results= true\r\n        }\r\n        this.$forceUpdate;\r\n         console.log( response);\r\n         \r\n\r\n        if (response.status !== 200) this.$router.replace(\"/NotFound\");\r\n      } catch (error) {\r\n        console.log(error);\r\n        this.$router.replace(\"/NotFound\");\r\n        return;\r\n      }\r\n    },\r\n    onReset() {\r\n      this.form = {\r\n         query: \"\",\r\n        number: 5,\r\n        cuisine: null,\r\n        diet: null,\r\n        intolarence: null,\r\n      };\r\n       this.sort=\"\";\r\n    },\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.container {\r\n  max-width: 500px;\r\n}\r\n\r\n#lab{\r\n  position:absolute;\r\n  right:31%;\r\n}\r\n\r\n.recipePrv{\r\n  height: 60%;\r\n  width: min-content;\r\n}\r\n\r\n.Sbtn{\r\n   background-color: #92C67D; border-color: white\r\n}\r\n\r\n</style>"]}]}