{"remainingRequest":"C:\\Users\\ohadv\\Downloads\\New folder\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ohadv\\Downloads\\New folder\\src\\pages\\SearchPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\ohadv\\Downloads\\New folder\\src\\pages\\SearchPage.vue","mtime":1594830477816},{"path":"C:\\Users\\ohadv\\Downloads\\New folder\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ohadv\\Downloads\\New folder\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ohadv\\Downloads\\New folder\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\ohadv\\Downloads\\New folder\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ohadv\\Downloads\\New folder\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgY3Vpc2luZXMgZnJvbSAiLi4vYXNzZXRzL2N1aXNpbmUiOw0KaW1wb3J0IGRpZXRzIGZyb20gIi4uL2Fzc2V0cy9kaWV0IjsNCmltcG9ydCBpbnRvbGFyZW5jZXMgZnJvbSAiLi4vYXNzZXRzL2ludG9sZXJhbmNlcyI7DQppbXBvcnQgUmVjaXBlc0xpc3QgZnJvbSAiLi4vY29tcG9uZW50cy9SZWNpcGVzTGlzdCI7DQppbXBvcnQgY3Vpc2luZSBmcm9tICcuLi9hc3NldHMvY3Vpc2luZSc7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogIlNlYXJjaCIsDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGZvcm06IHsNCiAgICAgICAgcXVlcnk6ICIiLA0KICAgICAgICBudW1iZXI6IDUsDQogICAgICAgIGN1aXNpbmU6IG51bGwsDQogICAgICAgIGRpZXQ6IG51bGwsDQogICAgICAgIGludG9sYXJlbmNlOiBudWxsLA0KICAgICAgfSwNCiAgICAgIGN1aXNpbmVzOiBbeyB2YWx1ZTogbnVsbCwgdGV4dDogIiIsIGRpc2FibGVkOiBmYWxzZSB9XSwNCiAgICAgIGRpZXRzOiBbeyB2YWx1ZTogbnVsbCwgdGV4dDogIiIsIGRpc2FibGVkOiBmYWxzZSB9XSwNCiAgICAgIGludG9sYXJlbmNlczogW3sgdmFsdWU6IG51bGwsIHRleHQ6ICIiLCBkaXNhYmxlZDogZmFsc2UgfV0sDQogICAgICByZXN1bHROdW06IFs1LDEwLDE1XSwNCiAgICAgIHJlY2lwZXM6IFtdLA0KICAgICAgcmVzdWx0czogdHJ1ZSwNCiAgICAgIHNvcnQ6ICJTb3J0IGJ5IiwNCiAgICAgIHNvcnRPcHRpb246IFsibGlrZXMiLCJ0aW1lIl0sDQogICAgfTsNCiAgfSwNCiAgY29tcG9uZW50czp7DQogICAgUmVjaXBlc0xpc3QsDQogIH0sDQogIG1vdW50ZWQoKSB7DQogICAgdGhpcy5jdWlzaW5lcy5wdXNoKC4uLmN1aXNpbmVzKTsNCiAgICB0aGlzLmRpZXRzLnB1c2goLi4uZGlldHMpOw0KICAgIHRoaXMuaW50b2xhcmVuY2VzLnB1c2goLi4uaW50b2xhcmVuY2VzKTsNCiAgICBpZih0aGlzLiRyb290LnN0b3JlLnVzZXJuYW1lKXsNCiAgICAgIGxldCBoaXN0b3J5PWxvY2FsU3RvcmFnZS5nZXRJdGVtKHRoaXMuJHJvb3Quc3RvcmUudXNlcm5hbWUpOw0KICAgICAgaWYoaGlzdG9yeSl7DQogICAgICBjb25zdCByZWNpcGVzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSh0aGlzLiRyb290LnN0b3JlLnVzZXJuYW1lKSk7DQogICAgICAgIHRoaXMucmVjaXBlcyA9IFtdOw0KICAgICAgICB0aGlzLnJlY2lwZXMucHVzaCguLi5yZWNpcGVzKTsNCiAgICAgIH0NCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBzb3J0UmVzdWx0cygpew0KICAgICAgaWYodGhpcy5zb3J0ID09PSAibGlrZXMiKXsNCiAgICAgICAgdGhpcy5yZWNpcGVzLnNvcnQoKGEsYikgPT4gKGEuYWdncmVnYXRlTGlrZXMgPCBiLmFnZ3JlZ2F0ZUxpa2VzKSA/IDEgOiAtMSkNCiAgICAgIH0NCiAgICAgIGlmKHRoaXMuc29ydCA9PT0gInRpbWUiKXsNCiAgICAgICAgdGhpcy5yZWNpcGVzLnNvcnQoKGEsYikgPT4gKGEucmVhZHlJbk1pbnV0ZXMgPiBiLnJlYWR5SW5NaW51dGVzKSA/IDEgOiAtMSkNCiAgICAgIH0NCiAgICAgIGNvbnNvbGUubG9nKHRoaXMucmVjaXBlcyk7DQogICAgfSwNCiAgICBhc3luYyBvblNlYXJjaCgpIHsNCiAgICAgIHRoaXMuc29ydD0iIjsNCiAgICAgIGxldCByZXNwb25zZTsNCiAgICAgIHRyeSB7DQogICAgICAgIGxldCBzZWFyY2hQYXJtYXM9e307DQogICAgICAgIGlmKHRoaXMuZm9ybS5jdWlzaW5lICE9PSBudWxsKXsNCiAgICAgICAgICBzZWFyY2hQYXJtYXNbImN1aXNpbmUiXT10aGlzLmZvcm0uY3Vpc2luZTsNCiAgICAgICAgfQ0KICAgICAgICBpZih0aGlzLmZvcm0uZGlldCAhPT0gbnVsbCl7DQogICAgICAgICAgc2VhcmNoUGFybWFzWyJkaWV0Il09dGhpcy5mb3JtLmRpZXQ7DQogICAgICAgIH0NCiAgICAgICAgaWYodGhpcy5mb3JtLmludG9sYXJlbmNlICE9PSBudWxsKXsNCiAgICAgICAgICBzZWFyY2hQYXJtYXNbImludG9sZXJhbmNlcyJdPXRoaXMuZm9ybS5pbnRvbGFyZW5jZTsNCiAgICAgICAgfQ0KICAgICAgICBjb25zb2xlLmxvZyhzZWFyY2hQYXJtYXMpOw0KICAgICAgICBpZih0aGlzLiRyb290LnN0b3JlLnVzZXJuYW1lKXsNCiAgICAgICAgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmF4aW9zLmdldCgNCiAgICAgICAgICBgaHR0cHM6Ly9iYWNrZW5kMy0yLmhlcm9rdWFwcC5jb20vdXNlci9zZWFyY2gvcXVlcnkvJHt0aGlzLmZvcm0ucXVlcnl9L2Ftb3VudC8ke3RoaXMuZm9ybS5udW1iZXJ9YCx7cGFyYW1zOiBzZWFyY2hQYXJtYXN9KTsNCiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSh0aGlzLiRyb290LnN0b3JlLnVzZXJuYW1lLCBKU09OLnN0cmluZ2lmeShyZXNwb25zZS5kYXRhKSk7DQogICAgICAgIH1lbHNlew0KICAgICAgICAgIHJlc3BvbnNlID0gYXdhaXQgdGhpcy5heGlvcy5nZXQoDQogICAgICAgICAgYGh0dHBzOi8vYmFja2VuZDMtMi5oZXJva3VhcHAuY29tL3JlY2lwZXMvc2VhcmNoL3F1ZXJ5LyR7dGhpcy5mb3JtLnF1ZXJ5fS9hbW91bnQvJHt0aGlzLmZvcm0ubnVtYmVyfWAse3BhcmFtczogc2VhcmNoUGFybWFzfSk7DQogICAgICAgIH0NCiAgICAgICAgY29uc3QgcmVjaXBlcyA9IHJlc3BvbnNlLmRhdGE7DQogICAgICAgIHRoaXMucmVjaXBlcyA9IFtdOw0KICAgICAgICB0aGlzLnJlY2lwZXMucHVzaCguLi5yZWNpcGVzKTsNCiAgICAgICAgaWYocmVjaXBlcy5sZW5ndGggPT0gMCl7DQogICAgICAgICAgdGhpcy5yZXN1bHRzPSBmYWxzZQ0KICAgICAgICB9ZWxzZXsNCiAgICAgICAgICB0aGlzLnJlc3VsdHM9IHRydWUNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLiRmb3JjZVVwZGF0ZTsNCiAgICAgICAgIGNvbnNvbGUubG9nKCByZXNwb25zZSk7DQogICAgICAgICANCg0KICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzICE9PSAyMDApIHRoaXMuJHJvdXRlci5yZXBsYWNlKCIvTm90Rm91bmQiKTsNCiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsNCiAgICAgICAgdGhpcy4kcm91dGVyLnJlcGxhY2UoIi9Ob3RGb3VuZCIpOw0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgfSwNCiAgICBvblJlc2V0KCkgew0KICAgICAgdGhpcy5mb3JtID0gew0KICAgICAgICAgcXVlcnk6ICIiLA0KICAgICAgICBudW1iZXI6IDUsDQogICAgICAgIGN1aXNpbmU6IG51bGwsDQogICAgICAgIGRpZXQ6IG51bGwsDQogICAgICAgIGludG9sYXJlbmNlOiBudWxsLA0KICAgICAgfTsNCiAgICAgICB0aGlzLnNvcnQ9IiI7DQogICAgfSwNCiAgfQ0KfTsNCg=="},{"version":3,"sources":["SearchPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SearchPage.vue","sourceRoot":"src/pages","sourcesContent":["<template>\r\n<div class=\"container\">\r\n    <h1 class=\"title\">Serach</h1>\r\n     <b-form @submit.prevent=\"onSearch\"  @reset.prevent=\"onReset\">\r\n      <b-form-group id=\"input-group-query\" label-cols-sm=\"3\" label=\"Query:\" label-for=\"query\">\r\n        <b-form-input id=\"query\" type=\"text\" v-model=\"form.query\"></b-form-input>\r\n      </b-form-group>\r\n      <b-form-group id=\"input-group-resultnum\" label-cols-sm=\"3\" label=\"Num of results:\" label-for=\"resultnum\">\r\n        <b-form-select id=\"resultnum\" v-model=\"form.number\" :options=\"resultNum\"></b-form-select>\r\n      </b-form-group>\r\n         <b-form-group id=\"input-group-cuisine\" label-cols-sm=\"3\" label=\"Cuisine:\" label-for=\"cuisine\">\r\n        <b-form-select id=\"cuisine\" v-model=\"form.cuisine\" :options=\"cuisines\"></b-form-select>\r\n      </b-form-group>\r\n         <b-form-group id=\"input-group-diet\" label-cols-sm=\"3\" label=\"Diet:\" label-for=\"diet\">\r\n        <b-form-select id=\"diet\" v-model=\"form.diet\" :options=\"diets\"></b-form-select>\r\n      </b-form-group>\r\n        <b-form-group id=\"input-group-intolarence\" label-cols-sm=\"3\" label=\"Intolarence:\" label-for=\"intolarence\">\r\n        <b-form-select id=\"intolarence\" v-model=\"form.intolarence\" :options=\"intolarences\"></b-form-select>\r\n      </b-form-group>\r\n      <b-button type=\"reset\" variant=\"danger\">Reset</b-button>\r\n       <b-button type=\"submit\" variant=\"primary\" style=\"width:250px;\" class=\"ml-5 w-75 Sbtn\">Search</b-button>\r\n    </b-form>\r\n    <br>\r\n     <b-container v-if=\"results\">\r\n    <h3>\r\n      Search Results:\r\n    </h3>\r\n    <b-form-group id=\"input-group-sort\" label-cols-sm=\"8\" label-for=\"sort\">\r\n        <span>Sort By:</span>\r\n        <span><b-form-select id=\"sort\" v-model=\"sort\" :options=\"sortOption\" @change=\"sortResults()\"></b-form-select></span>\r\n      </b-form-group>\r\n      <RecipesList recipe_type=\"recipe\" :recipes=\"recipes\"/>\r\n  </b-container>\r\n  <b-container v-else>\r\n    <h3>No Search Results</h3>\r\n  </b-container>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport cuisines from \"../assets/cuisine\";\r\nimport diets from \"../assets/diet\";\r\nimport intolarences from \"../assets/intolerances\";\r\nimport RecipesList from \"../components/RecipesList\";\r\nimport cuisine from '../assets/cuisine';\r\n\r\nexport default {\r\n  name: \"Search\",\r\n  data() {\r\n    return {\r\n      form: {\r\n        query: \"\",\r\n        number: 5,\r\n        cuisine: null,\r\n        diet: null,\r\n        intolarence: null,\r\n      },\r\n      cuisines: [{ value: null, text: \"\", disabled: false }],\r\n      diets: [{ value: null, text: \"\", disabled: false }],\r\n      intolarences: [{ value: null, text: \"\", disabled: false }],\r\n      resultNum: [5,10,15],\r\n      recipes: [],\r\n      results: true,\r\n      sort: \"Sort by\",\r\n      sortOption: [\"likes\",\"time\"],\r\n    };\r\n  },\r\n  components:{\r\n    RecipesList,\r\n  },\r\n  mounted() {\r\n    this.cuisines.push(...cuisines);\r\n    this.diets.push(...diets);\r\n    this.intolarences.push(...intolarences);\r\n    if(this.$root.store.username){\r\n      let history=localStorage.getItem(this.$root.store.username);\r\n      if(history){\r\n      const recipes = JSON.parse(localStorage.getItem(this.$root.store.username));\r\n        this.recipes = [];\r\n        this.recipes.push(...recipes);\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    sortResults(){\r\n      if(this.sort === \"likes\"){\r\n        this.recipes.sort((a,b) => (a.aggregateLikes < b.aggregateLikes) ? 1 : -1)\r\n      }\r\n      if(this.sort === \"time\"){\r\n        this.recipes.sort((a,b) => (a.readyInMinutes > b.readyInMinutes) ? 1 : -1)\r\n      }\r\n      console.log(this.recipes);\r\n    },\r\n    async onSearch() {\r\n      this.sort=\"\";\r\n      let response;\r\n      try {\r\n        let searchParmas={};\r\n        if(this.form.cuisine !== null){\r\n          searchParmas[\"cuisine\"]=this.form.cuisine;\r\n        }\r\n        if(this.form.diet !== null){\r\n          searchParmas[\"diet\"]=this.form.diet;\r\n        }\r\n        if(this.form.intolarence !== null){\r\n          searchParmas[\"intolerances\"]=this.form.intolarence;\r\n        }\r\n        console.log(searchParmas);\r\n        if(this.$root.store.username){\r\n        response = await this.axios.get(\r\n          `https://backend3-2.herokuapp.com/user/search/query/${this.form.query}/amount/${this.form.number}`,{params: searchParmas});\r\n          localStorage.setItem(this.$root.store.username, JSON.stringify(response.data));\r\n        }else{\r\n          response = await this.axios.get(\r\n          `https://backend3-2.herokuapp.com/recipes/search/query/${this.form.query}/amount/${this.form.number}`,{params: searchParmas});\r\n        }\r\n        const recipes = response.data;\r\n        this.recipes = [];\r\n        this.recipes.push(...recipes);\r\n        if(recipes.length == 0){\r\n          this.results= false\r\n        }else{\r\n          this.results= true\r\n        }\r\n        this.$forceUpdate;\r\n         console.log( response);\r\n         \r\n\r\n        if (response.status !== 200) this.$router.replace(\"/NotFound\");\r\n      } catch (error) {\r\n        console.log(error);\r\n        this.$router.replace(\"/NotFound\");\r\n        return;\r\n      }\r\n    },\r\n    onReset() {\r\n      this.form = {\r\n         query: \"\",\r\n        number: 5,\r\n        cuisine: null,\r\n        diet: null,\r\n        intolarence: null,\r\n      };\r\n       this.sort=\"\";\r\n    },\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.container {\r\n  max-width: 500px;\r\n}\r\n\r\n#lab{\r\n  position:absolute;\r\n  right:31%;\r\n}\r\n\r\n.recipePrv{\r\n  height: 60%;\r\n  width: min-content;\r\n}\r\n\r\n.Sbtn{\r\n   background-color: #92C67D; border-color: white\r\n}\r\n\r\n</style>"]}]}